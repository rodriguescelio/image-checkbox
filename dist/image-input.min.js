!function(t){"use strict";t.fn.imageInput=function(n){function i(){a.addClass("image-input-struct"),a.each(function(n,i){var e=t(i).attr("data-input-name"),r=t(i).attr("data-input-class"),l=a.selector;if(!(e&&""!=e||r&&""!=r))return void console.warn("Set a name or class for this imageInput: "+l);var p=t("<input>",{type:"hidden"});a.append(p),e&&""!=e&&p.attr("name",e),1==u.multiple&&(p=t("<input>",{type:"hidden","class":"image-input-value-control"}),a.append(p)),r&&""!=r&&p.addClass(r);var c=t(i).find("img");c.each(function(n,i){var a=t(i).attr("data-value"),e=o(a),u=i.outerHTML;t(e).append(u),i.outerHTML=e[0].outerHTML})}),d(a),x()}var a=t(this),e={multiple:!1,borderColor:"#ff1a1a",iconColor:"#FFFFFF",imagesPerLine:5},u=t.extend(e,n),o=function(n){var i=t("<div>",{"class":"image-input-option","data-input-value":n}),a=t("<div>",{"class":"image-input-flag"}).html("<i></i>");return i.html(a),i},r=function(n,i){var i=100/i,a=t(n).width(),e=a*i/100;return e-25},l=function(t){return'<svg height="24px" width="24px" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><path fill="'+t+'" d="M12,0C5.373,0,0,5.373,0,12c0,6.628,5.373,12,12,12c6.627,0,12-5.372,12-12C24,5.373,18.627,0,12,0z M19.754,9.561    l-8.607,8.607c-0.176,0.177-0.462,0.177-0.637,0l-1.272-1.285c-0.175-0.176-0.462-0.464-0.636-0.642l-2.96-3.112    c-0.087-0.087-0.133-0.21-0.133-0.327c0-0.115,0.046-0.227,0.133-0.314l1.297-1.169c0.088-0.09,0.205-0.134,0.321-0.134    c0.114,0.001,0.228,0.046,0.315,0.134l2.936,2.995c0.175,0.178,0.461,0.178,0.637,0l6.699-6.681c0.176-0.177,0.461-0.177,0.636,0    l1.272,1.285C19.93,9.094,19.93,9.384,19.754,9.561z"/></g></g></svg>'},p=function(t){var n=t.val(),i=null;return i=""==n?new Array:n.split(", ")},c=function(t,n){for(var i in t)n.call(this,i,t[i])},d=function(t){t.find(".image-input-option").css("width",r(t,u.imagesPerLine));var n=t.find(".image-input-option"),i=n.find(".image-input-flag"),a=i.find("i"),e=l(u.iconColor);i.css("border-top","50px solid "+u.borderColor),a.css("background-image","url('data:image/svg+xml;utf8,"+e+"')"),t.attr("data-multi",u.multiple)},s=function(t,n){t.find('input:not(.image-input-value-control)[value="'+n+'"]').eq(0).remove();var i=t.find("input.image-input-value-control"),a=p(i);c(a,function(t,i){i==n&&a.splice(t,1)}),a=a.join(", "),i.val(a)},f=function(n,i){var a=n.attr("data-input-name"),e=t("<input>",{type:"hidden",name:a,value:i});n.append(e);var u=n.find("input.image-input-value-control"),o=p(u);o.push(i),o=o.join(", "),u.val(o)},v=function(t,n){var i=t.find("input");i.val(n)},g=function(t){t.attr("data-input-focus",!0),t.find(".image-input-flag").show(),t.css("outline","solid 2px "+u.borderColor)},m=function(t){t.attr("data-input-focus",!1),t.find(".image-input-flag").hide(),t.css("outline","none")},h=function(n){var i=n.find(".image-input-option");i.each(function(n,i){var i=t(i),a=i.attr("data-input-focus");"true"==a&&m(i)})},w=function(t,n){var i=null;i="true"==n?t.find("input.image-input-value-control"):t.find("input"),i.change()},x=function(){t(".image-input-option").click(function(n){var i=t(this),a=i.parent(),e=a.attr("data-multi"),u=i.attr("data-input-value"),o=i.attr("data-input-focus");(void 0==o||""==o)&&(o="false"),"true"==e?("true"==o?(s(a,u),m(i)):(f(a,u),g(i)),w(a,e)):"false"==o&&(v(a,u),h(a),g(i),w(a,e))})};i()}}(jQuery);